package x.commons.util;

import static org.junit.Assert.assertTrue;

import java.util.Arrays;

import org.apache.commons.codec.binary.Hex;
import org.junit.BeforeClass;
import org.junit.Test;

public class ZipUtilsTest {
	
	private static final String oriStr = "2d2d2d2d2d424547494e20454e435259505445442050524956415445204b45592d2d2d2d2d0a4d494943786a424142676b71686b694739773042425130774d7a416242676b71686b6947397730424251777744675149306170667a36382f39416b43416767410a4d425147434371475349623344514d484241676e4d6767756372566836675343416f416f73476d74305772594e4c473070474f553636377236774266743767560a485a7970347530743076454a64556f56682b6a466e5951743774576c7a6f6757367a31464c4f567370466b58614e345570717a4159373275356c3732776446470a4d327a3845746c444e544a37675346745a2f423972726a67334651354a3733637431316c705a43514c682b52644e7371493075414756386b78507349687752750a38324e7049534a6966544d675a364b63327047446154636a5241765969356a4c6e6b2f7259794c592f4e536c5475682b6d78336e652b5a344244522b476559360a6d476b75584c43786d63643262474277494b2b624165787a4f7135766e4e566e75635958786d574d53702f4542656e4d555a796e5052442f393579364b3338560a586365567378793139596842334932534450626f57426c4d774667547730654c2b356c536d3354344c6c715763304647534d4858676952574b5032464b4830460a6c374539593634424e6874706a553878547a6d484c654632335069793570576f4a42666d61794e6f32637a357a503755764364596f4c78522b4e4c32615257760a554c31496d705549334a436544423133554c464c324166346c55706e3057547a6431637368444a36593854443255744c50744c375733566c6d4a725951794b470a553575442b593738716c4c4e7a2b39464855633533534565596431496c646f6b61317a4f6f6d5979436b5a57566c4d6b314b756d792b5075447241776533506e0a5347372b616a4a305567517058586634475747644b7937536f4d31704263456f374a7133707734662b387935637164524d4751446236766b4954776a735849330a4b6f574e695a6e3078506b2f694a476369595346646c686a4941665a77666755314f677652697a5578735266324867502b364b4e6f41396c51686e49665962320a4535395761336a567a655a527079616f456c786853787747627233444141433271454f7976667054676a6d34306832653059526c59616733524842654e5a73420a584f6c31617432772f474141356556496a726d3561784d37424663757642574b34424b5354516168314d47626555747a6b65695370493557373962784b632b610a4565564c4d504c375065715738485a6b4e4876483644755a6a6534673579756d61554a59354d73675877764f6d745342456f645738476c730a2d2d2d2d2d454e4420454e435259505445442050524956415445204b45592d2d2d2d2d0a";
	private static byte[] ori = null;
	private static final String gzippedStr = "1f8b08000000000000007d93b7b6b24c00007b9ee2f69c7b24a3254b58899271e990b0485641c2d3ffa1fb9a6fca997a7e7fff05a850777e5447f6911baaca8febebb114aa3fa68afecbbf84adebf2d60009e0f655b74f785929003c6ab50fe9f1a75b57057b3a954dd5219c4f17a995258c25c2061e94e5170cf407ab78f6154878b0315ef2775c0b3890a5511a3fb09fa9e48d1c0b5213bc458220be851554b38863e29aee13b75033f5558d221ae39a6cb40179b33827dd31e2443868cdbac59f496bef99c345d3eb9090c82c7c27326ba141c2668eb33a778a131a220eb4393d81cbfbdd6056f3784364f399a6bb29953dab26fdc2f9bc746a91607c6e37f7a3d7abbf1067c699f4c07856a18d53c1cc99092a599837bef4454fbeb186f6f446bb854e4ed0854b4df61b3b9464ca01c527618904a287ed72b7e4adcf0be601c1aa9be4432ab7e3f6e2bf83130f4b8eee5b9fd8c174524139d851ba0faeaf9c2efc2e98ec3926ee79197fb69dbea01ab03a1328ee634c4067af1a0e57aab448be0b7a36e4acee95e4940603fb7ac74f3f315d4633af944674a27a4102079c7a9e9ae8bc85477fb54a8d61dde7ce4fc96880aacf766764f2833f5c31faca051aadcd271d8bc9fce44b4416adf753a4b3865c2a8066234bb318a9e2ba681aa8243c0a3affd48a21a073a830d16cb9b325266cdcf5c61b79bb0989885f141289e75767390779d1ae51ceb3815aa282d6bb626c33fab88d3ddae5364de2ce6e6973e977d25d94b7b496ac3b100114c9ac31a8087bd3fd5e71308185b98bc168d313c8d551345eecb4721579def9fc55f836f49487f06df5706d3e779d25cc31719ee9406d6e7b7a1a307fa2402bbabad1a52a5d2b1cd137fcf59f47b47dfc8ab96297144c67942e9d570f7a851e0ca1f29724639bf828537fdab351edb63ad856f878b38a24c9cc4bbdeddf6a0a71d37354cd9414f23b9461d6bf82d2493f80b8df3a3a9b99f50425892f63bd79f77cb6d922d0f2e50b12930366107a594ddbf05146f3d196cf60d2f944bc3c36332733422d63cb762dd12d5fc9f99ab6cef57b1594256d4a0ef3fbd267918178fb83efebf7d6cf0150c72239c3ee43fc3fb3ea287f5bfd1fa561f27811040000";
	private static byte[] gzipped = null;
	
	@BeforeClass
	public static void init() throws Exception {
		ori = Hex.decodeHex(oriStr.toCharArray());
		gzipped = Hex.decodeHex(gzippedStr.toCharArray());
	}

	@Test
	public void gzipCompress() throws Exception {
		byte[] result = ZipUtils.gzipCompress(ori);
		assertTrue(Arrays.equals(gzipped, result));
	}
	
	@Test
	public void gzipDecompress() throws Exception {
		byte[] result = ZipUtils.gzipDecompress(gzipped);
		assertTrue(Arrays.equals(ori, result));
	}
}
